{"version":3,"sources":["search/store/reducer.js","search/store/actionCreator.js","search/store/constants.js","store/reducer.js","store/index.js","search/style.js","search/SearchForm.js","search/index.js","App.js","index.js"],"names":["defaultState","fromJS","routings","size","showRoutings","type","reducer","combineReducers","form","FormReducer","search","state","arguments","length","undefined","action","set","get","merge","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","SearchLeft","styled","div","_templateObject","SearchRight","_templateObject2","HeadTop","_templateObject3","SearchContainer","_templateObject4","SearchInput","_templateObject5","SearchButton","button","_templateObject6","reduxForm","thead","_templateObject7","tbody","_templateObject8","_templateObject9","props","handleSubmit","pristine","reset","submitting","react_default","a","createElement","onSubmit","style","marginLeft","immutable","name","component","value","placeholder","className","SearchWrapper","_this$props","this","list","toJS","search_SearchForm","map","item","index","flights","fromSegments","segments","retSegments","flightNumbers","f","idx","flightNumber","key","data","validatingCarrier","adultTotalPrice","React","Component","WS","WebSocket","onMessage","msg","console","log","connect","getIn","dispatch","req","request","adtNumber","chdNumber","json","JSON","stringify","message","extension","send","axios","post","then","res","arr","j","i","push","na","setTimeout","actionCreator","catch","err","App","es","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.ab98104f.chunk.js","sourcesContent":["import { fromJS } from 'immutable';\nimport { SHOW_ROUTINGS } from './constants'; \nconst defaultState = fromJS({\n\troutings:[],\n\tsize: 0,\n})\n\nexport default (state = defaultState, action) => {\n\tif (SHOW_ROUTINGS === action.type) {\n\t\treturn state.set('routings',state.get('routings').merge(action.routings)).set('size',state.get('size')+action.size);\n\t}\n\treturn state;\n}","import {SHOW_ROUTINGS} from './constants'\n\nexport const showRoutings = (routings,size) => ({\n\ttype: SHOW_ROUTINGS,\n\troutings,\n\tsize\n\n});\n","export const SHOW_ROUTINGS = 'search/SHOW_ROUTINGS';","import { combineReducers } from 'redux-immutable';\nimport { reducer as FormReducer } from 'redux-form';\nimport { reducer as SearchReducer } from '../search/store'\nconst reducer = combineReducers({\t\n  form: FormReducer, // mounted under \"form\"\n  search: SearchReducer,\n});\n\nexport default reducer;","import { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from './reducer';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducer, composeEnhancers(\n\tapplyMiddleware(thunk)\n));\n\nexport default store;","import styled from 'styled-components';\nexport const SearchLeft = styled.div`\n\tposition: fixed;\n\tfloat: left;\n\tmargin-left: 15px;\n\tpadding-top: 30px;\n\ttext-align: center;\n\twidth: 20%;\n\tbackground: #eff0f1;\n\n`;\nexport const SearchRight = styled.div`\n\tposition: relative;\n\tfloat: right;\n\tpadding-top: 30px;\n\twidth: 76%;\n\toutline:1px solid #eee;\n\tbackground:none;\n\tul.li.span{\n\t\tdisplay: block;\n\t\twidth: 200px;\n\t\ttext-align: left;\n\n\t}\n`;\nexport const HeadTop = styled.div`\n\tposition: relative;\n\tmargin-top: -20px;\n\theight: 50px;\n`\nexport const SearchContainer = styled.div`\n    overflow: hidden;\n\twidth: 90%;\n\tmargin: 0 auto;\n\n`\nexport const SearchInput = styled.div`\n\tmargin-bottom: 15px;\n\tspan{\n\t\tmargin-left: -20px;\n\t\twidth:25px;\n\t\theight:20px;\n\t}\n\t.textInput {\n\t\twidth: 160px;\n\t\theight: 20px;\n\t\tmargin-left: 10px;\n\t\tfont-size: 14px;\n\t\tborder-radius: 7px;\n\n\t}\n\t.textTitle{\n\t\twidth:auto;\n\t\theight:auto;\n\t}\t\n\n`\nexport const SearchButton = styled.button`\n\tposition: relative;\n\twidth: 150px;\n\tcursor: pointer;\n\tborder-radius: 10px;\n\tbackground: #0093d2;\n\ttext-align: center;\n\tfont-size: 25px;\n`\nexport const GridHead = styled.thead`\n\theight: 40px;\n\tbackground: red;\n\tth{\n\t\twidth:120px;\n\t}\n`\nexport const GridBody = styled.tbody`\n\tbackground: #eff0f1;\n\ttd{\n\t\twidth:120px;\n\t}\n\n`\nexport const GridItem = styled.div`\n\theight:30px;\n`","import React from 'react';\nimport { Field, reduxForm } from 'redux-form/immutable';\nimport {\nSearchInput,\nSearchButton\n} from './style'\nconst SearchForm = props => {\n  const { handleSubmit, pristine, reset, submitting } = props;\n  return (\n    <form onSubmit={handleSubmit}>\n    <SearchInput>\n        <span style={{marginLeft:'30px'}}>单程:</span>\n          <Field\n            name=\"tripType\"\n            component=\"input\"\n            type=\"radio\"\n            value=\"1\"\n          />\n          <span style={{marginLeft:'30px'}}>往返:</span>\n          <Field\n            name=\"tripType\"\n            component=\"input\"\n            type=\"radio\"\n            value=\"2\"\n          />\n      </SearchInput>\n      <SearchInput>\n        <span>出发城市:</span>\n          <Field\n            name=\"depCity\"\n            component=\"input\"\n            type=\"text\"\n            placeholder=\"depCity\"\n            className='textInput'\n          />\n      </SearchInput>\n      <SearchInput>\n        <span>到达城市:</span>\n          <Field\n            name=\"arrCity\"\n            component=\"input\"\n            type=\"text\"\n            placeholder=\"arrCity\"\n            className='textInput'\n          />\n      </SearchInput>\n      <SearchInput>\n        <span>去程日期:</span>\n          <Field\n            name=\"depDate\"\n            component=\"input\"\n            type=\"text\"\n            placeholder=\"depDate\"\n            className='textInput'\n          />\n      </SearchInput>\n      <SearchInput>\n        <span>返程日期:</span>\n          <Field\n            name=\"retDate\"\n            component=\"input\"\n            type=\"text\"\n            placeholder=\"retDate\"\n            className='textInput'\n          />\n      </SearchInput>\n      <SearchInput>\n        <span>成人人数:</span>\n          <Field\n            name=\"adtNumber\"\n            component=\"select\"\n            className='textInput'\n          >\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\">3</option>\n          <option value=\"4\">4</option>\n          <option value=\"5\">5</option>\n          <option value=\"6\">6</option>\n          <option value=\"7\">7</option>\n          <option value=\"8\">8</option>\n          <option value=\"9\">9</option>\n          </Field>\n      </SearchInput>\n      <SearchInput>\n        <span>儿童人数:</span>\n          <Field\n            name=\"chdNumber\"\n            component=\"select\"\n            className='textInput'\n          >\n          <option value=\"0\">0</option>\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\">3</option>\n          <option value=\"4\">4</option>\n          <option value=\"5\">5</option>\n          </Field>\n      </SearchInput>\n      <SearchButton>\n        搜索\n      </SearchButton>\n    </form>\n  );\n};\n\nexport default reduxForm({\n  form: 'searchForm', // a unique identifier for this form\n})(SearchForm);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport SearchForm from './SearchForm'\nimport axios from 'axios';\nimport { actionCreator } from './store'\nimport { SearchLeft,\n\tSearchContainer,\n\tSearchRight,\n\tGridHead,\n\tGridBody,\n\tGridItem,\n\tHeadTop } from './style'\nclass SearchWrapper extends React.Component {\n\trender() {\n\t\tlet { handleSubmit,routings,size } = this.props;\n\t\tlet list = routings.toJS();\n\n\t\treturn (\n\t\t\t<SearchContainer>\n\t\t\t\t<SearchLeft>\n\t\t\t\t\t<SearchForm onSubmit={handleSubmit}/>\n\t\t\t\t</SearchLeft>\n\t\t\t\t<SearchRight>\n\t\t\t\t\t<HeadTop>\n\t\t\t\t\t<label>\n\t\t\t\t\t报价条数:\n\t\t\t\t\t</label>\n\t\t\t\t\t{\n\t\t\t\t\t\tsize\n\t\t\t\t\t}\n\t\t\t\t\t</HeadTop>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlist.map((item,index) =>{\n\t\t\t\t\t\t\t\tlet flights = item.fromSegments.segments\n\t\t\t\t\t\t\t\tif(item.retSegments){\n\t\t\t\t\t\t\t\t\tvar retFlights = item.retSegments.segments;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlet flightNumbers  = '';\n\t\t\t\t\t\t\t\tflights.map((f,idx)=>{\n\t\t\t\t\t\t\t\t\tif(f.flightNumber)\n\t\t\t\t\t\t\t\t\tflightNumbers += f.flightNumber + '_';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn (<li key={item.data}>\n\t\t\t\t\t\t\t\t\t<span>{item.validatingCarrier}</span> <span>{flightNumbers}</span> <span>{item.adultTotalPrice}</span>\n\t\t\t\t\t\t\t\t</li>)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t\t\t</SearchRight>\n\t\t\t</SearchContainer>\n\t\t);\n\t}\n\n}\nconst mapStates = (state) =>({\n\troutings:state.getIn(['search','routings']),\n\tsize:state.getIn(['search','size'])\n});\nconst WS =  new WebSocket('ws://localhost:9688/websocket');\nWS.onMessage = (msg) => {\n\tconsole.log(msg);\n}\nconst mapActions = (dispatch) =>({\n\thandleSubmit(req){\n\t\tlet request  = req;\n\t\tif(request.size===0){\n\t\t\trequest = {};\n\t\t}\n\t\tif(!request.adtNumber){\n\t\t\trequest.adtNumber = 1;\n\t\t}\n\t\tif (!request.chdNumber) {\n\t\t\trequest.chdNumber = 0;\n\t\t}\n\t\tlet json = JSON.stringify(request);\n\t\tlet message = {};\n\t\tmessage.code = 10000;\n\t\tmessage.extension = json;\n\t\tWS.send(JSON.stringify(message));\n\t\taxios.post('/hello/search',request)\n\t\t.then((res) => {\n\n\t\t\tvar arr = [];\n\t\t\tlet response = res.data;\n\t\t\tlet routings = response.routings;\n\t\t\tlet j = 0;\n\t\t\tfor (var i = routings.length - 1; i >= 0; i--) {\n\t\t\t\tarr.push(routings[i]);\n\t\t\t\tif((i % 100) === 0){\n\t\t\t\t\tlet na = arr;\n\t\t\t\t\tarr=[];\n\t\t\t\t\tsetTimeout(\n\t\t\t\t\t\t()=>{\n\t\t\t\t\t\t\tdispatch(actionCreator.showRoutings(na,na.length));\n\t\t\t\t\t\t},j*1000);\n\t\t\t\t\tj++;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t\n\t\t}).catch((err)=>{\n\t\t\tconsole.log(err);\n\t\t});\n\n\n\n\t}\n});\n\nexport default connect(mapStates,mapActions)(SearchWrapper);","import React from 'react';\nimport {\n\tProvider\n} from 'react-redux'\nimport store from './store'\nimport SearchWrapper from './search';\n\nconst App = () => {\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<SearchWrapper/>\n        </Provider>\n\t);\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}